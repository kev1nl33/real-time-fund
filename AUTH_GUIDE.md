# æ·»åŠ ç™»å½•åŠŸèƒ½æŒ‡å—

## ğŸ¯ ç›®æ ‡

å®ç°çœŸæ­£çš„å¤šè®¾å¤‡è‡ªåŠ¨åŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½® user_idã€‚

---

## âœ… å·²å®Œæˆçš„åç«¯å‡†å¤‡

1. âœ… ä¿®æ”¹ `lib/supabase.js` - getUserId() ä¼˜å…ˆä½¿ç”¨ç™»å½•ç”¨æˆ· ID
2. âœ… åˆ›å»º `lib/auth.js` - è®¤è¯æœåŠ¡å°è£…
3. âœ… æ‰€æœ‰æ•°æ®æ“ä½œå·²æ”¯æŒç™»å½•ç”¨æˆ·

---

## ğŸš€ å‰ç«¯é›†æˆæ­¥éª¤

### æ–¹æ¡ˆ Aï¼šç®€å•ç™»å½•ï¼ˆæ¨èï¼‰

åœ¨ç°æœ‰é¡µé¢æ·»åŠ ä¸€ä¸ªç™»å½•æŒ‰é’®ï¼Œç‚¹å‡»åå¼¹å‡ºç™»å½•æ¡†ã€‚

**ä¼˜ç‚¹**ï¼š
- ä¸å½±å“ç°æœ‰åŠŸèƒ½
- æœªç™»å½•ä¹Ÿèƒ½ä½¿ç”¨ï¼ˆè®¾å¤‡æŒ‡çº¹ï¼‰
- ç™»å½•åè‡ªåŠ¨åŒæ­¥

### æ–¹æ¡ˆ Bï¼šå¼ºåˆ¶ç™»å½•

è®¿é—®ç½‘ç«™å¿…é¡»å…ˆç™»å½•ã€‚

**ä¼˜ç‚¹**ï¼š
- æ•°æ®æ›´å®‰å…¨
- æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰è´¦å·

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### 1. æ³¨å†Œè´¦å·

```javascript
import { authService } from '@/lib/auth'

// æ³¨å†Œ
const { data, error } = await authService.signUp(
  'kevin@example.com',
  'your-password'
)

if (error) {
  alert('æ³¨å†Œå¤±è´¥ï¼š' + error.message)
} else {
  alert('æ³¨å†ŒæˆåŠŸï¼è¯·æŸ¥æ”¶éªŒè¯é‚®ä»¶')
}
```

### 2. ç™»å½•

```javascript
// ç™»å½•
const { data, error } = await authService.signIn(
  'kevin@example.com',
  'your-password'
)

if (error) {
  alert('ç™»å½•å¤±è´¥ï¼š' + error.message)
} else {
  alert('ç™»å½•æˆåŠŸï¼')
  // åˆ·æ–°é¡µé¢ï¼Œæ•°æ®è‡ªåŠ¨åŠ è½½
  window.location.reload()
}
```

### 3. ç™»å‡º

```javascript
// ç™»å‡º
await authService.signOut()
window.location.reload()
```

---

## ğŸ¨ UI é›†æˆå»ºè®®

### åœ¨é¡µé¢å³ä¸Šè§’æ·»åŠ ï¼š

**æœªç™»å½•çŠ¶æ€**ï¼š
```
[ç™»å½•] [æ³¨å†Œ]
```

**å·²ç™»å½•çŠ¶æ€**ï¼š
```
ğŸ‘¤ kevin@example.com [ç™»å‡º]
```

---

## ğŸ”§ Supabase é…ç½®

### å¯ç”¨é‚®ç®±è®¤è¯

1. è®¿é—® Supabase Dashboard
2. Authentication â†’ Providers
3. ç¡®ä¿ "Email" å·²å¯ç”¨
4. å¯é€‰ï¼šå…³é—­ "Confirm email"ï¼ˆè·³è¿‡é‚®ç®±éªŒè¯ï¼‰

---

## ğŸ¯ å®Œæ•´æµç¨‹

### é¦–æ¬¡ä½¿ç”¨

1. ç”¨æˆ·è®¿é—®ç½‘ç«™
2. ç‚¹å‡»"æ³¨å†Œ"
3. è¾“å…¥é‚®ç®±å’Œå¯†ç 
4. æ³¨å†ŒæˆåŠŸï¼Œè‡ªåŠ¨ç™»å½•
5. æ·»åŠ åŸºé‡‘ â†’ ä¿å­˜åˆ°äº‘ç«¯

### æ¢è®¾å¤‡ä½¿ç”¨

1. ç”¨æˆ·åœ¨æ–°è®¾å¤‡è®¿é—®ç½‘ç«™
2. ç‚¹å‡»"ç™»å½•"
3. è¾“å…¥é‚®ç®±å’Œå¯†ç 
4. ç™»å½•æˆåŠŸ â†’ **8åªåŸºé‡‘è‡ªåŠ¨å‡ºç°ï¼**

**å®Œå…¨æ— éœ€æ‰‹åŠ¨æ“ä½œï¼** âœ¨

---

## ğŸ’¡ å¿«é€Ÿæµ‹è¯•

### åˆ›å»ºæµ‹è¯•è´¦å·

åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š

```sql
-- æ³¨æ„ï¼šè¿™åªæ˜¯ä¸ºäº†æµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒåº”è¯¥é€šè¿‡å‰ç«¯æ³¨å†Œ
-- Supabase Auth ä¼šè‡ªåŠ¨ç®¡ç†ç”¨æˆ·
```

å®é™…ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å‰ç«¯è°ƒç”¨ï¼š

```javascript
// åœ¨æµè§ˆå™¨ Console ä¸­æµ‹è¯•
import { authService } from './lib/auth'

// æ³¨å†Œæµ‹è¯•è´¦å·
await authService.signUp('kevin@test.com', 'Test123456')

// ç™»å½•
await authService.signIn('kevin@test.com', 'Test123456')

// æŸ¥çœ‹å½“å‰ç”¨æˆ·
const user = await authService.getCurrentUser()
console.log('å½“å‰ç”¨æˆ·:', user)
```

---

## ğŸ” æ•°æ®è¿ç§»

### å°†ç°æœ‰æ•°æ®è¿ç§»åˆ°ç™»å½•è´¦å·

1. å…ˆæ³¨å†Œå¹¶ç™»å½•
2. è·å–ç™»å½•ç”¨æˆ·çš„ IDï¼š
```javascript
const user = await authService.getCurrentUser()
console.log('User ID:', user.id)
```

3. åœ¨ Supabase SQL Editor ä¸­æ›´æ–°æ•°æ®ï¼š
```sql
-- å°† 'kevin' çš„æ•°æ®è¿ç§»åˆ°ç™»å½•ç”¨æˆ·
UPDATE funds 
SET user_id = 'your-user-id-here'
WHERE user_id = 'kevin';
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### é€‰é¡¹ 1ï¼šæˆ‘å¸®ä½ å®ç°å‰ç«¯ç™»å½•ç•Œé¢

éœ€è¦ä¿®æ”¹ç°æœ‰çš„å‰ç«¯ä»£ç ï¼Œæ·»åŠ ç™»å½•/æ³¨å†ŒæŒ‰é’®å’Œå¼¹çª—ã€‚

**æ—¶é—´**ï¼šçº¦ 30 åˆ†é’Ÿ

### é€‰é¡¹ 2ï¼šä½ è‡ªå·±é›†æˆ

å‚è€ƒä¸Šé¢çš„ä»£ç ç¤ºä¾‹ï¼Œåœ¨å‰ç«¯æ·»åŠ ç™»å½•åŠŸèƒ½ã€‚

**æ–‡æ¡£**ï¼šhttps://supabase.com/docs/guides/auth

### é€‰é¡¹ 3ï¼šå…ˆç”¨å›ºå®šè´¦å·æµ‹è¯•

1. åœ¨ Supabase Dashboard æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªç”¨æˆ·
2. åœ¨ä»£ç ä¸­ç¡¬ç¼–ç è¿™ä¸ªç”¨æˆ·çš„ ID
3. æ‰€æœ‰è®¾å¤‡éƒ½ç”¨è¿™ä¸ª ID

---

## ğŸ’¬ ä½ çš„é€‰æ‹©ï¼Ÿ

å‘Šè¯‰æˆ‘ä½ æƒ³è¦å“ªä¸ªæ–¹æ¡ˆï¼š
- "å¸®æˆ‘å®ç°å‰ç«¯ç™»å½•ç•Œé¢"ï¼ˆæ–¹æ¡ˆ 1ï¼‰
- "æˆ‘è‡ªå·±æ¥"ï¼ˆæ–¹æ¡ˆ 2ï¼‰
- "å…ˆç”¨å›ºå®šè´¦å·æµ‹è¯•"ï¼ˆæ–¹æ¡ˆ 3ï¼‰
